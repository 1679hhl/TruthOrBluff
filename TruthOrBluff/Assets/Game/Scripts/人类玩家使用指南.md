# 人类玩家控制功能使用指南

## ✅ 已完成的功能

### 1. 核心类
- ✅ `HumanPlayer.cs` - 人类玩家类（实现IAgent接口）
- ✅ `PlayerInputManager.cs` - 玩家输入管理器（处理UI交互）
- ✅ `HumanPlayerController.cs` - 辅助控制器（可选）
- ✅ 修改 `GameRunner.cs` - 支持人类玩家

### 2. 配置方式

#### 在Unity Inspector中设置：
1. 打开 `GameRunner` 组件
2. 勾选 `Player 0 Is Human`
3. 或者在 `Bot Types` 数组中设置 `-1` 表示人类玩家
   - `-1` = 人类玩家
   - `0` = 随机Bot
   - `1` = 谨慎Bot
   - `2` = 莽夫Bot

**示例配置：**
```
Bot Types: [-1, 1, 2, 0]
表示：人类玩家 + 谨慎Bot + 莽夫Bot + 随机Bot
```

---

## 🎮 UI设置步骤

### 必需的UI组件

#### 1. PlayerInputManager（必须创建）
在场景中创建一个GameObject并添加 `PlayerInputManager` 组件：

```
Hierarchy:
  └─ PlayerInputManager (GameObject)
      ├─ CardSelectionPanel (Panel)
      │   ├─ CardButtonContainer (Vertical Layout Group)
      │   ├─ ConfirmButton (Button)
      │   └─ SelectionInfoText (TextMeshPro)
      └─ ChallengeDecisionPanel (Panel)
          ├─ ChallengeButton (Button) - 文本："质疑"
          ├─ PassButton (Button) - 文本："不质疑"
          └─ DecisionInfoText (TextMeshPro)
```

#### 2. 卡牌按钮预制体（CardButtonPrefab）
创建一个卡牌按钮预制体：
```
CardButtonPrefab:
  └─ Button
      └─ Text (TextMeshPro) - 显示卡牌牌面（Q/K/A）
```

#### 3. 绑定引用
在 `PlayerInputManager` 组件中拖拽绑定：
- `Card Selection Panel` → 卡牌选择面板
- `Challenge Decision Panel` → 质疑决策面板
- `Card Button Container` → 卡牌按钮容器
- `Card Button Prefab` → 卡牌按钮预制体
- `Confirm Card Button` → 确认按钮
- `Selection Info Text` → 选择提示文本
- `Challenge Button` → 质疑按钮
- `Pass Button` → 不质疑按钮
- `Decision Info Text` → 决策提示文本

---

## 🎯 游戏流程

### 人类玩家回合：

#### 出牌阶段（Claim Phase）
1. 游戏暂停自动步进
2. 显示 `CardSelectionPanel`
3. 玩家点击手牌选择1-3张牌
4. 已选择的牌会高亮显示（黄色）
5. 点击"确认"按钮提交选择
6. 面板隐藏，游戏继续

#### 响应阶段（Response Phase）
1. 上家出牌后，轮到人类玩家
2. 显示 `ChallengeDecisionPanel`
3. 显示上家出牌信息："玩家X 出了 Y 张牌"
4. 玩家选择：
   - **质疑** → 翻牌验证
   - **不质疑** → 继续出牌
5. 面板隐藏，游戏继续

---

## 🔧 快速测试

### 最简UI设置（5分钟）：

1. **创建PlayerInputManager**
   ```
   - 创建空GameObject，命名为"PlayerInputManager"
   - 添加 PlayerInputManager 组件
   ```

2. **创建卡牌选择面板**
   ```
   Canvas/
     └─ CardSelectionPanel (Panel, 居中显示)
         ├─ Text: "选择1-3张牌"
         ├─ CardContainer (Horizontal Layout Group)
         └─ ConfirmButton (Button: "确认")
   ```

3. **创建质疑面板**
   ```
   Canvas/
     └─ ChallengePanel (Panel, 居中显示)
         ├─ Text: "质疑？"
         ├─ ChallengeButton (Button: "质疑")
         └─ PassButton (Button: "不质疑")
   ```

4. **创建卡牌按钮预制体**
   ```
   Button (宽100, 高150)
     └─ Text (显示Q/K/A)
   ```

5. **绑定并测试**
   - 在Inspector中绑定所有引用
   - 运行游戏
   - 当轮到玩家0时，UI会自动弹出

---

## 💡 使用提示

### 自动播放模式
- **关闭 Auto Play**：人类玩家可以手动操作，AI自动执行
- **开启 Auto Play**：遇到人类玩家时自动暂停，等待输入

### 混合模式
可以设置多个人类玩家：
```
Bot Types: [-1, -1, 1, 2]
表示：2个人类玩家 + 1个谨慎Bot + 1个莽夫Bot
```

### 调试信息
在Console中会显示：
```
[GameRunner] 等待 玩家1 选择卡牌...
[GameRunner] 玩家1 选择了 2 张牌
[GameRunner] 等待 玩家1 决定是否质疑...
[GameRunner] 玩家1 决定质疑
```

---

## ⚠️ 注意事项

1. **必须有PlayerInputManager**
   - 场景中必须有 `PlayerInputManager` 组件
   - 只能有一个实例（Singleton）

2. **UI面板初始状态**
   - 两个面板初始都应该是隐藏状态（Inactive）
   - 系统会自动显示/隐藏

3. **按钮事件**
   - 不需要手动绑定按钮onClick事件
   - `PlayerInputManager` 会自动绑定

4. **卡牌数量限制**
   - 当前限制：1-3张
   - 选择不足/超过时，确认按钮不可点击

5. **游戏暂停**
   - 人类玩家回合时，自动播放会自动暂停
   - 完成输入后自动继续

---

## 🚀 下一步优化建议

- [ ] 添加手牌可视化（显示玩家自己的手牌）
- [ ] 添加出牌历史记录
- [ ] 添加倒计时功能
- [ ] 添加音效反馈
- [ ] 添加动画效果
- [ ] 支持手牌拖拽选择
- [ ] 添加快捷键支持（空格确认等）

---

**现在可以在Unity中测试人类玩家功能了！** 🎉
